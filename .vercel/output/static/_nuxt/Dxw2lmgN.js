import{S as v}from"./D9eaOJUj.js";import{f as R}from"./CcyVmj5o.js";import{r as m,l as u,a2 as $,e as p,aG as h,aN as k,x as d,H as w,au as N}from"./CUTs2qnP.js";function E(){const o=m(),c=u(()=>["#text","#comment"].includes(o.value?.$el.nodeName)?o.value?.$el.nextElementSibling:R(o));return{primitiveElement:o,currentElement:c}}const M="data-reka-collection-item";function b(o={}){const{key:c="",isProvider:A=!1}=o,f=`${c}CollectionProvider`;let e;if(A){const n=m(new Map);e={collectionRef:m(),itemMap:n},N(f,e)}else e=$(f);const x=(n=!1)=>{const t=e.collectionRef.value;if(!t)return[];const l=Array.from(t.querySelectorAll(`[${M}]`)),r=Array.from(e.itemMap.value.values()).sort((i,s)=>l.indexOf(i.ref)-l.indexOf(s.ref));return n?r:r.filter(i=>i.ref.dataset.disabled!=="")},y=p({name:"CollectionSlot",setup(n,{slots:t}){const{primitiveElement:l,currentElement:a}=E();return w(a,()=>{e.collectionRef.value=a.value}),()=>d(v,{ref:l},t)}}),C=p({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(n,{slots:t,attrs:l}){const{primitiveElement:a,currentElement:r}=E();return h(i=>{if(r.value){const s=k(r.value);e.itemMap.value.set(s,{ref:r.value,value:n.value}),i(()=>e.itemMap.value.delete(s))}}),()=>d(v,{...l,[M]:"",ref:a},t)}}),S=u(()=>Array.from(e.itemMap.value.values())),I=u(()=>e.itemMap.value.size);return{getItems:x,reactiveItems:S,itemMapSize:I,CollectionSlot:y,CollectionItem:C}}export{b as u};
